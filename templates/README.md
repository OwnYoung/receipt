# PDF 模板说明

## acroForm PDF 模板要求

您需要创建一个包含表单字段的 PDF 模板，字段名称必须与以下名称完全匹配：

### 必需字段

1. **id** - 收据编号
   - 类型: 文本字段
   - 用途: 显示收据编号（格式：NO+房间号+月份，如：NO101202509）

2. **rent** - 租金金额
   - 类型: 文本字段
   - 用途: 显示租金数额（如：1500.00）

3. **rent_zh** - 租金中文大写金额
   - 类型: 文本字段
   - 用途: 显示租金的中文大写金额（如：壹仟伍佰元整）

4. **room_number** - 房间号
   - 类型: 文本字段
   - 用途: 显示房间编号（如：101、A座202）

5. **recipient** - 收款人
   - 类型: 文本字段
   - 用途: 显示收款人姓名

6. **payer** - 付款人
   - 类型: 文本字段
   - 用途: 显示付款人姓名

7. **date** - 收据日期
   - 类型: 文本字段
   - 用途: 显示收据开具日期（如：2025-09-21）

8. **month** - 租金月份
   - 类型: 文本字段
   - 用途: 显示租金所属月份（如：2025年9月）

9. **purpose** - 收费目的
   - 类型: 文本字段
   - 用途: 显示收费原因（如：房租、水电费）

## 创建 PDF 模板的方法

### 方法一：使用 Adobe Acrobat

1. 打开 Adobe Acrobat Pro
2. 创建或打开一个 PDF 文档
3. 选择 "准备表单" 工具
4. 添加文本字段，并设置上述字段名称
5. 保存为 `receipt_template.pdf`

### 方法二：使用免费工具

1. **PDFtk Server**: 
   - 下载：https://www.pdflabs.com/tools/pdftk-server/
   - 使用命令行创建表单字段

2. **LibreOffice Writer**:
   - 创建文档，插入表单控件
   - 导出为 PDF 时选择 "创建 PDF 表单"

### 方法三：在线工具

使用在线 PDF 编辑器（如 PDFscape、SmallPDF 等）添加表单字段

## 模板布局建议

```
收据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

收据编号：[id]                        日期：[date]

收款人：[recipient]                   房间号：[room_number]

收费项目：[purpose]                    金额：¥[rent]

金额大写：[rent_zh]

付款人：[payer]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
此收据为 [month] 的费用凭证
```

## 测试模板

将模板文件放置在 `templates/receipt_template.pdf` 后，可以使用以下命令测试：

```bash
# 启动服务
go run cmd/main.go

# 测试生成收据
curl -X POST http://localhost:8080/api/receipt/generate \
  -H "Content-Type: application/json" \
  -d '{
    "rent": 1500.00,
    "room_number": "101",
    "recipient": "张三",
    "payer": "李四",
    "date": "2025-09-21",
    "month": "2025年9月",
    "purpose": "房租"
  }' \
  --output test_receipt.pdf
```

## 故障排除

1. **字段名称不匹配**: 确保 PDF 表单字段名称与代码中的完全一致
2. **字段类型错误**: 所有字段都应该是文本字段，不要使用其他类型
3. **权限问题**: 确保 PDF 没有密码保护或编辑限制
4. **编码问题**: 确保模板支持中文字符显示

## 注意事项

- 字段名称区分大小写
- 建议在字段周围留有足够的空间以容纳不同长度的文本
- 测试时使用包含中文字符的数据确保显示正常
- 模板文件大小建议控制在 1MB 以内以提高处理速度